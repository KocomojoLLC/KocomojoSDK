# KocomojoSDK for iOS

## Using KocomojoExperience

<div class="objc">
<p>In the app's root View Controller, import KocomojoExperience.h:</p>
<p>`#import <KocomojoSDK/KocomojoExperience.h>`</p>
<p>Inside of `viewDidLoad`:</p>
<pre class="hljs"><code>KocomojoExperience *experienceView = [[KocomojoExperience alloc]initWithFrame:self.view.frame];
[self.view addSubview:experienceView];</code></pre>
</div>

<div class="swift">
<p>In the app's root View Controller, import KocomojoSDK.KocomojoExperience:</p>
<p>`import KocomojoSDK.KocomojoExperience`</p>
<p>Inside of `viewDidLoad()`:</p>
<pre class="hljs"><code>let experienceView = KocomojoExperience(frame:self.view.frame);
self.view.addSubview(experienceView);</code></pre>
</div>

&nbsp;

## Info.plist 

These are the key/value pairs you'll need to add to your Info.plist: 

**NSLocationAlwaysUsageDescription** ([more info](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW18))

For example: 

> "Please enable location tracking in order to receive promotion notifications"

**NSBluetoothPeripheralUsageDescription** ([more info](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW20))

For example:

> "Please enable bluetooth to monitor beacons in order to receive promotion notifications"

&nbsp;

## Local Push Notifications 

You can have KocomojoSDK send Push Notifications whenever an Experiences comes in range. 

To enable this:

<div class="objc">
<pre class="hljs"><code>[[KocomojoSDK sharedInstance]setShowPushNotifications:YES];</code></pre>
<p>And also:</p>
<pre class="hljs"><code>- (void)application:(UIApplication &#42;)application didRegisterUserNotificationSettings:(UIUserNotificationSettings &#42;)notificationSettings
{
  [[KocomojoSDK sharedInstance] didRegisterUserNotificationSettings:notificationSettings];
}</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>KocomojoSDK.sharedInstance().showPushNotifications = true;</code></pre>
<p>And also:</p>
<pre class="hljs"><code>func application(_ application: UIApplication, didRegister notificationSettings: UIUserNotificationSettings)
{
  KocomojoSDK.sharedInstance().didRegister(notificationSettings);
}</code></pre>
</div>


&nbsp;


### Frequency

You change the frequency of push notifications - how many seconds will need to pass after a push notification for another one to occur.  (Any notifications that would occur during this time is ignored as to not overwhelm the client.)  This defaults to 60 &#42; 60 &#42; 2 = 3600, or 2 hours.

<div class="objc">
<pre class="hljs"><code>[[KocomojoSDK sharedInstance]setMinimumSecondsBetweenPushNotifications:[NSNumber numberWithInteger: 3600]];</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>KocomojoSDK.sharedInstance().minimumSecondsBetweenPushNotifications = 3600</code></pre>
</div>

&nbsp;

### Push Templates

There are 2 templates that can be customized by the client.  One is for `pushTemplateSingular` (when there's one Experience in range) and the other is `pushTemplatePlural` (when there's more than one Experience in range.)

They can be assigned like:

<div class="objc">
<pre class="hljs"><code>[[KocomojoSDK sharedInstance] setPushTemplateSingular:@"An awesome experience __NAME__ has just entered your sphere"];
[[KocomojoSDK sharedInstance] setPushTemplatePlural:@"__NAMES__ are all available!!!"];</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>KocomojoSDK.sharedInstance().pushTemplateSingular = "An awesome experience __NAME__ has just entered your sphere";
KocomojoSDK.sharedInstance().pushTemplatePlural = "__NAMES__ are all available!!!";</code></pre>
</div>

&nbsp;

### Open app from Push

<div class="objc">
<p>When the user opens a local push notification generated by the SDK, you can have it automatically "touch" the button for them by implementing the following:</p>
<pre class="hljs"><code>- (void)application:(UIApplication &#42;)application didReceiveLocalNotification:(UILocalNotification &#42;)notification
{
  [[KocomojoSDK sharedInstance] didReceiveLocalNotification:notification];
}</code></pre>
</div>

<div class="swift">
<p>When the user opens a local push notification generated by the SDK, you can have it automatically "touch" the button for them by implementing the following:</p>
<pre class="hljs"><code>func application(_ application: UIApplication, didReceive notification: UILocalNotification)
{
  KocomojoSDK.sharedInstance().didReceive(notification);
}</code></pre>
</div>



Note that if you want to generate your own Push Notifications using the names of the experiences as they come into range, you can implement a listener for `KocomojoExperiencesInRangeNotification` (more information in the next section)

&nbsp;