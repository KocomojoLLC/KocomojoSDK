<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>KocomojoSDK for iOS</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="assets/css/pilcrow.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/hljs-github.min.css"/>
    <link type="text/css" rel="stylesheet" href="assets/css/style.css"/>
  </head>
<body>
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="col-xs-3">
        <div style="position:fixed;height:calc(100% - 120px)">
          <div class="btn-group btn-toggle" style="margin-left:15px;"> 
            <button class="btn btn-lg btn-default active">Objective-C</button>
            <button class="btn btn-lg btn-default">Swift</button>
          </div>
          <p>&nbsp;</p><ul class="nav nav-list" style="height:100%;overflow-y:scroll;">
    <li class="sidebar-header-1"><a href="#kocomojosdk-for-ios">KocomojoSDK for iOS</a></li>
    <li class="sidebar-header-2"><a href="#installation">Installation</a></li>
    <li class="sidebar-header-3"><a href="#run-kocomojo-sdk-gem">Run Kocomojo SDK Gem</a></li>
    <li class="sidebar-header-2"><a href="#implementation">Implementation</a></li>
    <li class="sidebar-header-3"><a href="#api-key-validation">API Key validation</a></li>
    <li class="sidebar-header-2"><a href="#adding-the-button">Adding the Button</a></li>
    <li class="sidebar-header-2"><a href="#info-plist">Info.plist</a></li>
    <li class="sidebar-header-2"><a href="#local-push-notifications">Local Push Notifications</a></li>
    <li class="sidebar-header-3"><a href="#push-templates">Push Templates</a></li>
    <li class="sidebar-header-3"><a href="#open-app-from-push">Open app from Push</a></li>
    <li class="sidebar-header-2"><a href="#notifications">Notifications</a></li>
    <li class="sidebar-header-3"><a href="#button-touched">Button Touched</a></li>
    <li class="sidebar-header-3"><a href="#button-enabled">Button Enabled</a></li>
    <li class="sidebar-header-3"><a href="#full-screen-view-closed">Full Screen View Closed</a></li>
    <li class="sidebar-header-3"><a href="#experiences-in-range">Experiences In Range</a></li>
    <li class="sidebar-header-3"><a href="#bluetooth-off">Bluetooth Off</a></li>
</ul>        </div>
      </div>
      <div class="col-xs-9 main"><h1 id="kocomojosdk-for-ios"><a class="header-link" href="#kocomojosdk-for-ios"></a>KocomojoSDK for iOS</h1>
<p>&nbsp;</p>
<h2 id="installation"><a class="header-link" href="#installation"></a>Installation</h2>
<p>KocomojoSDK is available through <a href="http://cocoapods.org">CocoaPods</a>. To install
it, simply add the following line to your Podfile:</p>
<pre class="hljs"><code>pod <span class="hljs-string">'KocomojoSDK'</span></code></pre><div class="swift">
<p>Make sure to uncomment this line:</p>

<pre class="hljs"><code>use_frameworks!</code></pre>
</div>

<p>&nbsp;</p>
<h3 id="run-kocomojo-sdk-gem"><a class="header-link" href="#run-kocomojo-sdk-gem"></a>Run Kocomojo SDK Gem</h3>
<p>After running <code>pod install</code> there&#39;s one more step -- using the <code>cocoapod-kocomojo-gem</code> to add a build phase to your project.  To install:</p>
<pre class="hljs"><code>gem install cocoapods-kocomojo-sdk</code></pre><p>then run: </p>
<pre class="hljs"><code>pod kocomojo-sdk</code></pre><p>If there&#39;s more than one <code>.xcodeproj</code> in your directory you&#39;ll need to specify it like: </p>
<pre class="hljs"><code>pod kocomojo-sdk MyProject.xcodeproj</code></pre><p>&nbsp;</p>
<h2 id="implementation"><a class="header-link" href="#implementation"></a>Implementation</h2>
<div class="objc">
  <p>Import KocomojoSDK.h in AppDelegate:</p>
  <p><code>#import &lt;KocomojoSDK/KocomojoSDK.h&gt;</code></p>

  <p>Add these lines in <code>application:didFinishLaunchingWithOptions:</code>: </p>

  <pre class="hljs"><code>KocomojoSDK *sharedInstance = [KocomojoSDK sharedInstance];
[sharedInstance setApiKey:@&quot;YOUR_API_KEY_HERE&quot;];
[sharedInstance setRadiusInMiles:[NSNumber numberWithFloat:15.0f]];  // set it to number of miles
[sharedInstance setShowPushNotifications:YES];  // this is optional, more information below</code>
</pre>
</div>

<div class="swift">
  <p>Import KocomojoSDK into AppDelegate.swift:</p>
  <p><code>import KocomojoSDK</code></p>

  <p>Add these lines in <code>application(_:didFinishLaunchingWithOptions:)</code>: </p>

  <pre class="hljs"><code>let sharedInstance: KocomojoSDK = KocomojoSDK.sharedInstance();
sharedInstance.apiKey = &quot;***REMOVED***&quot;;
sharedInstance.radiusInMiles = 15.0; // set it to number of miles
sharedInstance.showPushNotifications = true; // this is optional, more information below</code></pre>
</div>

<p>&nbsp;</p>
<h3 id="api-key-validation"><a class="header-link" href="#api-key-validation"></a>API Key validation</h3>
<p>You can validate your api key directly by calling </p>
<div class="objc">
<pre class="hljs"><code>[[KocomojoSDK sharedInstance]validateApiKey:^(BOOL isValid) { ... }</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>sharedInstance.validateApiKey { (valid: Bool) in ...</code></pre>
</div>

<p>Alternatively you can also look for an error message in logs.</p>
<p>&nbsp;</p>
<h2 id="adding-the-button"><a class="header-link" href="#adding-the-button"></a>Adding the Button</h2>
<div class="objc">
<p>In the View Controller where you&#39;d like to put the button import KocomojoButton.h:</p>

<p><code>#import &lt;KocomojoSDK/KocomojoButton.h&gt;</code></p>

<p>Inside of <code>viewDidLoad</code>:</p>

<pre class="hljs"><code>KocomojoButton *button = [[KocomojoButton alloc]initWithFrame:(CGRect){0, 0, 200, 200}];
button.center = self.view.center;
[button setEnabledImageName:@&quot;buttonEnabled&quot;];    // both images are 
[button setDisabledImageName:@&quot;buttonDisabled&quot;];  // from xcassets
[self.view addSubview:button];
</code></pre>
</div>

<div class="swift">
<p>In the View Controller where you&#39;d like to put the button import import KocomojoSDK.KocomojoButton:</p>

<p><code>import KocomojoSDK.KocomojoButton</code></p>

<p>Inside of <code>viewDidLoad()</code>:</p>

<pre class="hljs"><code>let button = KocomojoButton(frame:CGRect(x: 0, y: 0, width: 200, height: 200));
button.center = self.view.center;
button.enabledImageName = &quot;buttonEnabled&quot;;    // both images are 
button.disabledImageName = &quot;buttonDisabled&quot;;  // from xcassets
self.view.addSubview(button);
</code></pre>
</div>

<p>You can also implement this in Storyboard, just create a View inside the ViewController and change it&#39;s Class to <code>KocomojoButton</code>.<br>This can then be connected to an <code>IBOutlet</code> and enabled / disabled images can be assigned like above.  </p>
<p>&nbsp;</p>
<h2 id="info-plist"><a class="header-link" href="#info-plist"></a>Info.plist</h2>
<p>These are the key/value pairs you&#39;ll need to add to your Info.plist: </p>
<p><strong>NSLocationAlwaysUsageDescription</strong> (<a href="https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW18">more info</a>)</p>
<p>For example: </p>
<blockquote>
<p>&quot;Please enable location tracking in order to receive promotion notifications&quot;</p>
</blockquote>
<p><strong>NSBluetoothPeripheralUsageDescription</strong> (<a href="https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html#//apple_ref/doc/uid/TP40009251-SW20">more info</a>)</p>
<p>For example:</p>
<blockquote>
<p>&quot;Please enable bluetooth to monitor beacons in order to receive promotion notifications&quot;</p>
</blockquote>
<p>&nbsp;</p>
<h2 id="local-push-notifications"><a class="header-link" href="#local-push-notifications"></a>Local Push Notifications</h2>
<p>You can have KocomojoSDK send Push Notifications whenever an Experiences comes in range. </p>
<p>To enable this:</p>
<div class="objc">
<pre class="hljs"><code>[[KocomojoSDK sharedInstance]setShowPushNotifications:YES];</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>KocomojoSDK.sharedInstance().showPushNotifications = true;</code></pre>
</div>


<p>&nbsp;</p>
<h3 id="push-templates"><a class="header-link" href="#push-templates"></a>Push Templates</h3>
<p>There are 2 templates that can be customized by the client.  One is for <code>pushTemplateSingular</code> (when there&#39;s one Experience in range) and the other is <code>pushTemplatePlural</code> (when there&#39;s more than one Experience in range.)</p>
<p>They can be assigned like:</p>
<div class="objc">
<pre class="hljs"><code>[[KocomojoSDK sharedInstance] setPushTemplateSingular:@&quot;An awesome experience <strong>NAME</strong> has just entered your sphere&quot;];
[[KocomojoSDK sharedInstance] setPushTemplatePlural:@&quot;<strong>NAMES</strong> are all available!!!&quot;];</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>KocomojoSDK.sharedInstance().pushTemplateSingular = &quot;An awesome experience <strong>NAME</strong> has just entered your sphere&quot;;
KocomojoSDK.sharedInstance().pushTemplatePlural = &quot;<strong>NAMES</strong> are all available!!!&quot;;</code></pre>
</div>

<p>&nbsp;</p>
<h3 id="open-app-from-push"><a class="header-link" href="#open-app-from-push"></a>Open app from Push</h3>
<div class="objc">
<p>When the user opens a local push notification generated by the SDK, you can have it automatically &quot;touch&quot; the button for them by implementing the following:</p>
<pre class="hljs"><code>- (void)application:(UIApplication &#42;)application didReceiveLocalNotification:(UILocalNotification &#42;)notification
{
  [[KocomojoSDK sharedInstance] didReceiveLocalNotification:notification];
}</code></pre>
</div>

<div class="swift">
<p>When the user opens a local push notification generated by the SDK, you can have it automatically &quot;touch&quot; the button for them by implementing the following:</p>
<pre class="hljs"><code>func application(_ application: UIApplication, didReceive notification: UILocalNotification)
{
  KocomojoSDK.sharedInstance().didReceive(notification);
}</code></pre>
</div>



<p>Note that if you want to generate your own Push Notifications using the names of the experiences as they come into range, you can implement a listener for <code>KocomojoExperiencesInRangeNotification</code> (more information in the next section)</p>
<p>&nbsp;</p>
<h2 id="notifications"><a class="header-link" href="#notifications"></a>Notifications</h2>
<p>&nbsp;</p>
<div class="objc">
<p>Button Touched (<code>KocomojoButtonTouchedNotification</code>)</p>
<p>Button Enabled (<code>KocomojoButtonEnabledNotification</code>)</p>
<p>Full Screen View Closed (<code>KocomojoFullScreenViewClosedNotification</code>)</p>
<p>Experiences In Range (<code>KocomojoExperiencesInRangeNotification</code>)</p>
<p>Bluetooth Disabled (<code>KocomojoBluetoothDisabledNotification</code>)</p>
</div>

<div class="swift">
<p>Button Touched (<code>Notification.Name.KocomojoButtonTouched</code>)</p>
<p>Button Enabled (<code>Notification.Name.KocomojoButtonEnabled</code>)</p>
<p>Full Screen View Closed (<code>Notification.Name.KocomojoFullScreenViewClosed</code>)</p>
<p>Experiences In Range (<code>Notification.Name..KocomojoExperiencesInRange</code>)</p>
<p>Bluetooth Disabled (<code>Notification.Name.KocomojoBluetoothDisabled</code>)</p>
</div>

<p>&nbsp;</p>
<h3 id="button-touched"><a class="header-link" href="#button-touched"></a>Button Touched</h3>
<p>This simply tells when the button is touched, whether or not it is enabled.  </p>
<div class="objc">
<pre class="hljs"><code>[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(buttonTouched:) name:KocomojoButtonTouchedNotification object:nil];

...

- (void)buttonTouched:(NSNotification *)notification {
  NSLog(@&quot;Button Touched!&quot;);
}
</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>NotificationCenter.default.addObserver(self, selector: #selector(self.buttonTouched), name: Notification.Name.KocomojoButtonTouched, object: nil);

...

func buttonTouched(notification: Notification) {
    NSLog(&quot;Button Touched!&quot;);
}
</code></pre>
</div>

<p>&nbsp;</p>
<h3 id="button-enabled"><a class="header-link" href="#button-enabled"></a>Button Enabled</h3>
<p>This is called when the button is either enabled or disabled.  The <code>NSDictionary</code> in the <code>notification.object</code> contains <code>enabled</code>. </p>
<div class="objc">
<pre class="hljs"><code>[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(buttonEnabled:) name:KocomojoButtonEnabledNotification object:nil];

...

- (void)buttonEnabled:(NSNotification <em>)notification {
  NSDictionary </em>notificationDic = notification.object;

  if([notificationDic[@&quot;enabled&quot;]boolValue] == YES) {
    NSLog(@&quot;Enabled!!&quot;);
  } else {
    NSLog(@&quot;Disabled!!&quot;);
  }
}
</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>NotificationCenter.default.addObserver(self, selector: #selector(self.buttonEnabled), name: Notification.Name.KocomojoButtonEnabled, object: nil);

...

func buttonEnabled(notification: Notification) {
    let notificationDic = notification.object as! NSDictionary;
    let enabledNum = notificationDic[&quot;enabled&quot;] as! NSNumber;

    if(enabledNum.boolValue) {
      NSLog(&quot;Enabled!&quot;);
    } else {
      NSLog(&quot;Disabled!&quot;);
    }
}
</code></pre>
</div>


<p>&nbsp;</p>
<h3 id="full-screen-view-closed"><a class="header-link" href="#full-screen-view-closed"></a>Full Screen View Closed</h3>
<p>This is called when the full screen view is closed.</p>
<div class="objc">
<pre class="hljs"><code>[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(fullScreenViewClosed:) name:KocomojoFullScreenViewClosedNotification object:nil];

...

- (void)fullScreenViewClosed:(NSNotification *)notification {
  NSLog(@&quot;Full Screen View Closed&quot;);
}</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>NotificationCenter.default.addObserver(self, selector: #selector(self.fullScreenViewClosed), name: Notification.Name.KocomojoFullScreenViewClosed, object: nil);

...

func fullScreenViewClosed(notification: Notification) {
  NSLog(@&quot;Full Screen View Closed&quot;);
}</code></pre>
</div>

<p>&nbsp;</p>
<h3 id="experiences-in-range"><a class="header-link" href="#experiences-in-range"></a>Experiences In Range</h3>
<p>When experiences come in range (or go out of range) this will be posted.  The <code>notification.data</code> will be an array containing <code>id</code>, <code>name</code>, and <code>inRange</code> (true or false) of each experience.  </p>
<p>One thing to note is that this will only be posted with experiences who&#39;s <code>inRange</code> status changes.  Once an experiences comes <code>inRange</code>, the only other time it will appears in the <code>notification.data</code> array is when <code>inRange</code> becomes false.  </p>
<div class="objc">
<pre class="hljs"><code>[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(experiencesInRange:) name:KocomojoExperiencesInRangeNotification object:nil];

...

- (void)experiencesInRange:(NSNotification <em>)notification {
  NSArray </em>experiencesInRangeArray = notification.object;

  NSLog(@&quot;Experiences In Range: %@&quot;, experiencesInRangeArray);
}</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>NotificationCenter.default.addObserver(self, selector: #selector(self.experiencesInRange), name: Notification.Name.KocomojoExperiencesInRange, object: nil);

...

func experiencesInRange(notification: Notification) {
  let experiencesInRangeArray = notification.object as! NSArray;

  NSLog(&quot;Experiences In Range: %@&quot;, experiencesInRangeArray);
}</code></pre>
</div>

<p>&nbsp;</p>
<h3 id="bluetooth-off"><a class="header-link" href="#bluetooth-off"></a>Bluetooth Off</h3>
<p>This is called if the user launches the app with Bluetooth disabled, or if they disable Bluetooth while in the app.</p>
<div class="objc">
<pre class="hljs"><code>[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(bluetoothDisabled:) KocomojoBluetoothDisabledNotification object:nil];

...

- (void)bluetoothDisabled:(NSNotification *)notification {
  // Notify the user to turn Bluetooth on
}</code></pre>
</div>

<div class="swift">
<pre class="hljs"><code>NotificationCenter.default.addObserver(self, selector: #selector(self.bluetoothDisabled), name: Notification.Name.KocomojoBluetoothDisabled, object: nil);

...

func bluetoothDisabled(notification: Notification) {
  // Notify the user to turn Bluetooth on
}</code></pre>
</div>      </div>
    </div>
  </div>

  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
  <script>
    $('.btn-toggle').click(function(evt) {
        $(evt.target).blur()
        if($(evt.target).hasClass('active')) { return; }
        $(this).find('.btn').toggleClass('active');  

        if($(this).find('.active').text().toLowerCase() == 'swift') {
          $('.objc').css('display', 'none')
          $('.swift').css('display', 'block')
        } else {
          $('.objc').css('display', 'block')
          $('.swift').css('display', 'none')
        }
        
        if ($(this).find('.btn-primary').size()>0) {
          $(this).find('.btn').toggleClass('btn-primary');
        }
        if ($(this).find('.btn-danger').size()>0) {
          $(this).find('.btn').toggleClass('btn-danger');
        }
        if ($(this).find('.btn-success').size()>0) {
          $(this).find('.btn').toggleClass('btn-success');
        }
        if ($(this).find('.btn-info').size()>0) {
          $(this).find('.btn').toggleClass('btn-info');
        }
        
//        $(this).find('.btn').toggleClass('btn-default');
          
    });

    $('.swift').css('display', 'none') // default to Obj-C 
  </script>
</body>
</html>
